<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (24) -->
<title>JavaBox (JavaBox Java Scripting Container 1.3.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.dellroad.javabox, class: JavaBox">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../resource-files/stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/JavaBox.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../search.html">Search</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.dellroad.javabox</a></li>
<li><a href="JavaBox.html" class="current-selection">JavaBox</a></li>
</ol>
<div class="nav-list-search">
<input type="text" id="search-input" disabled placeholder="Search" aria-label="Search in documentation" autocomplete="off">
<input type="reset" id="reset-search" disabled value="Reset">
</div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;
<input type="text" class="filter-input" disabled placeholder="Filter" aria-label="Filter table of contents" autocomplete="off">
<input type="reset" class="reset-filter" disabled value="Reset">
</div>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span>&#10094;</button><button class="show-sidebar">&#10095;<span>&nbsp;Show sidebar</span></button>
<ol class="toc-list">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E(org.dellroad.javabox.Config)" tabindex="0">JavaBox(Config)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#getConfig()" tabindex="0">getConfig()</a></li>
<li><a href="#isInitialized()" tabindex="0">isInitialized()</a></li>
<li><a href="#isClosed()" tabindex="0">isClosed()</a></li>
<li><a href="#isExecuting()" tabindex="0">isExecuting()</a></li>
<li><a href="#isSuspended()" tabindex="0">isSuspended()</a></li>
<li><a href="#getJShell()" tabindex="0">getJShell()</a></li>
<li><a href="#getCurrent()" tabindex="0">getCurrent()</a></li>
<li><a href="#initialize()" tabindex="0">initialize()</a></li>
<li><a href="#close()" tabindex="0">close()</a></li>
<li><a href="#getVariable(java.lang.String)" tabindex="0">getVariable(String)</a></li>
<li><a href="#setVariable(java.lang.String,java.lang.Object)" tabindex="0">setVariable(String, Object)</a></li>
<li><a href="#setVariable(java.lang.String,java.lang.String,java.lang.Object)" tabindex="0">setVariable(String, String, Object)</a></li>
<li><a href="#variableValue()" tabindex="0">variableValue()</a></li>
<li><a href="#compile(java.lang.String)" tabindex="0">compile(String)</a></li>
<li><a href="#execute(java.lang.String)" tabindex="0">execute(String)</a></li>
<li><a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)" tabindex="0">process(String, JavaBox.ProcessMode, SnippetValidator)</a></li>
<li><a href="#suspend(java.lang.Object)" tabindex="0">suspend(Object)</a></li>
<li><a href="#resume(java.lang.Object)" tabindex="0">resume(Object)</a></li>
<li><a href="#interrupt()" tabindex="0">interrupt()</a></li>
<li><a href="#executionContextFor(java.lang.Class)" tabindex="0">executionContextFor(Class)</a></li>
<li><a href="#startingExecution()" tabindex="0">startingExecution()</a></li>
<li><a href="#finishingExecution(java.lang.Object,java.lang.Throwable)" tabindex="0">finishingExecution(Object, Throwable)</a></li>
</ol>
</li>
</ol>
</nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class JavaBox" class="title">Class JavaBox</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.dellroad.javabox.JavaBox</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">JavaBox</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></span></div>
<div class="block">A container for scripts written in the Java language.

 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/prism.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/components/prism-java.min.js"></script>
 <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism.min.css" rel="stylesheet"/>

 <p><b>Overview</b>

 <p>
 Each <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> instance relies on an underlying <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link"><code>JShell</code></a> instance to parse and execute
 scripts and to hold its state, i.e., the variables, methods, and classes declared by those scripts.
 The <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> instance is configured for <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/execution/LocalExecutionControl.html" title="class or interface in jdk.jshell.execution" class="external-link">local execution</a>, so scripts
 run within the same virtual machine.

 <p>
 Because <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> instances always run in local execution mode, they support the direct transfer of Java objects
 between the container and the outside world:
 <ul>
  <li>Return values from script execution are returned to the caller
  <li><a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link"><code>JShell</code></a> variables can be read and written directly (see <a href="#getVariable(java.lang.String)"><code>getVariable()</code></a>
      and <a href="#setVariable(java.lang.String,java.lang.Object)"><code>setVariable()</code></a>).
 </ul>

 Each <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> instance uses a separate <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ClassLoader.html" title="class or interface in java.lang" class="external-link"><code>ClassLoader</code></a>, so generated classes can be garbage
 collected when the container is closed.

 <p><b>Lifecycle</b>

 <p>
 Usage follows this pattern:
 <ul>
  <li>Instances are created by providing a <a href="Config.html" title="class in org.dellroad.javabox"><code>Config</code></a>, an immutable configuration object
      created via <a href="Config.Builder.html" title="class in org.dellroad.javabox"><code>Config.Builder</code></a>.
  <li>Instances must be <a href="#initialize()"><code>initialize()</code></a>'d before use. This builds the underlying <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link"><code>JShell</code></a>
      instance and creates an internal service thread.
  <li>Instances must be <a href="#close()"><code>close()</code></a>'d to release resources when no longer needed.
 </ul>

 <p><b>Script Execution</b>

 <p>
 Scripts are executed via <a href="#execute(java.lang.String)"><code>execute()</code></a>. A single script may contain multiple individual expressions,
 statements, or declarations; these are called "snippets". The snippets are analyzed and executed one at a time.
 The return value from <a href="#execute(java.lang.String)"><code>execute()</code></a> contains a distinct <a href="SnippetOutcome.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome</code></a> for each of the snippets.
 Often the last snippet's return value (if any) is considered to be the overall script's "return value".

 <p><b>Script Validation</b>

 <p>
 It is also possible to validate and compile a script without executing it. This allows the caller to gather some basic
 information about the script and control which types of snippets are allowed. See <a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)"><code>process</code></a> for details.

 <p><b>Suspend and Resume</b>

 <p>
 If a script invokes <a href="#suspend(java.lang.Object)"><code>suspend()</code></a>, then <a href="#execute(java.lang.String)"><code>execute()</code></a> returns to the caller with the
 last snippet outcome being an instance of <a href="SnippetOutcome.Suspended.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Suspended</code></a>. The script can be restarted later by invoking
 <a href="#resume(java.lang.Object)"><code>resume()</code></a>, which behaves just like <a href="#execute(java.lang.String)"><code>execute()</code></a>, except that it continues the previous
 script instead of starting a new one. On the next return, the previously suspended snippet's earlier <a href="SnippetOutcome.Suspended.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Suspended</code></a>
 outcome will be overwritten with its new, updated outcome.

 <p>
 As long as there is a suspended script associated with an instance, new invocations of <a href="#execute(java.lang.String)"><code>execute()</code></a> will fail.
 Instead, suspeneded scripts must be resumed via <a href="#resume(java.lang.Object)"><code>resume()</code></a> and allowed to terminate (even if interrupted;
 see below).

 <p><b>Interruption</b>

 <p>
 Both methods <a href="#execute(java.lang.String)"><code>execute()</code></a> and <a href="#resume(java.lang.Object)"><code>resume()</code></a> block the calling thread until the script terminates
 or suspends itself. Another thread can interrupt that execution by interrupting the calling thread, or equivalently
 by invoking <a href="#interrupt()"><code>interrupt()</code></a>. If a snippet's execution is interrrupted, its outcome will be
 <a href="SnippetOutcome.Interrupted.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Interrupted</code></a>.

 <p>
 A suspended script can also be interrupted, but the script does not awaken immediately. Instead, it must be resumed first
 before the interrupt can take effect. Upon the next call to <a href="#resume(java.lang.Object)"><code>resume()</code></a>, it will terminate immediately with
 outcome <a href="SnippetOutcome.Interrupted.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Interrupted</code></a>.

 <p><b>Controls</b>

 <p>
 Scripts may be restricted or otherwise transformed using <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a>s which are specified as part of the initial
 <a href="Config.html" title="class in org.dellroad.javabox"><code>Config</code></a>. Controls can do the following things:
 <ul>
  <li>Inspect and modify all of the bytecode generated from scripts
  <li>Keep state associated with each <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> instance
  <li>Keep state associated with each <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> snippet execution
 </ul>

 <p>
 Every control is given a per-container <a href="Control.ContainerContext.html" title="class in org.dellroad.javabox"><code>Control.ContainerContext</code></a> and a per-execution <a href="Control.ExecutionContext.html" title="class in org.dellroad.javabox"><code>Control.ExecutionContext</code></a>.
 Controls can modify script bytecode to insert method calls into the control itself, where it can then utilize its
 state to decide what to do, etc. To access its state from within an executing snippet, a control invokes
 <a href="#executionContextFor(java.lang.Class)"><code>executionContextFor()</code></a>.

 <p><b>Examples</b>

 <p>
 Here is a simple "Hello, World" example:
 <pre><code class="language-java">
  Config config = Config.builder().build();
  try (JavaBox box = new JavaBox(config)) {
      box.initialize();
      box.setVariable("target", "World");
      ScriptResult result = box.execute("""
          String.format("Hello, %s!", target);
          """);
      System.out.println(result.returnValue());      // prints "Hello, World!"
  }
 </code></pre>

 <p>
 Here is an example that shows how to avoid infinite loops:
 <pre><code class="language-java">
  // Set up control
  Config config = Config.builder()
    .withControl(new TimeLimitControl(Duration.ofSeconds(5)))
    .build();

  // Execute script
  ScriptResult result;
  try (JavaBox box = new JavaBox(config)) {
      box.initialize();
      result = box.execute("""
          while (true) {
              Thread.yield();
          }
      """);
  }

  // Check result
  switch (result.snippetOutcomes().get(0)) {
  case SnippetOutcome.ExceptionThrown e when e.exception() instanceof TimeLimitExceededException
    -&gt; System.out.println("infinite loop detected");
  }
 </code></pre>

 <p><b>Thread Safety</b>

 <p>
 Instances are thread safe but single threaded: when simultaneous operations are attempted from multiple threads,
 only one operation executes at a time.</div>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="JavaBox.ProcessMode.html" class="type-name-link" title="enum class in org.dellroad.javabox">JavaBox.ProcessMode</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies the snippet processing mode to use when invoking <a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)"><code>process()</code></a>.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.dellroad.javabox.Config)" class="member-name-link">JavaBox</a><wbr>(<a href="Config.html" title="class in org.dellroad.javabox">Config</a>&nbsp;config)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Close this instance.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#compile(java.lang.String)" class="member-name-link">compile</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Compile the given script but do not execute it.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#execute(java.lang.String)" class="member-name-link">execute</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Execute the given script in this container.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="Control.ExecutionContext.html" title="class in org.dellroad.javabox">Control.ExecutionContext</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#executionContextFor(java.lang.Class)" class="member-name-link">executionContextFor</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="Control.html" title="interface in org.dellroad.javabox">Control</a>&gt;&nbsp;controlType)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Obtain the execution context associated with the specified <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a> class
 and the script execution occurring in the current thread.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#finishingExecution(java.lang.Object,java.lang.Throwable)" class="member-name-link">finishingExecution</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;result,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;error)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Subclass hook invoked when finishing script execution from within the snippet thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="Config.html" title="class in org.dellroad.javabox">Config</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConfig()" class="member-name-link">getConfig</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the <a href="Config.html" title="class in org.dellroad.javabox"><code>Config</code></a> associated with this instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="JavaBox.html" title="class in org.dellroad.javabox">JavaBox</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getCurrent()" class="member-name-link">getCurrent</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Get the <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> instance associated with the current thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link">JShell</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getJShell()" class="member-name-link">getJShell</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link"><code>JShell</code></a> instanced associated with this container.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getVariable(java.lang.String)" class="member-name-link">getVariable</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the value of a variable in this container.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initialize()" class="member-name-link">initialize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initialize this instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#interrupt()" class="member-name-link">interrupt</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Interrupt the current script execution, if any.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isClosed()" class="member-name-link">isClosed</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this instance is closed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isExecuting()" class="member-name-link">isExecuting</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this instance is currently executing a script.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isInitialized()" class="member-name-link">isInitialized</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this instance has been initialized.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isSuspended()" class="member-name-link">isSuspended</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this instance has a suspended script.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)" class="member-name-link">process</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source,
 <a href="JavaBox.ProcessMode.html" title="enum class in org.dellroad.javabox">JavaBox.ProcessMode</a>&nbsp;mode,
 <a href="SnippetValidator.html" title="interface in org.dellroad.javabox">SnippetValidator</a>&nbsp;validator)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Process the given script in this container.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resume(java.lang.Object)" class="member-name-link">resume</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;returnValue)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Resume this instance's suspended script.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setVariable(java.lang.String,java.lang.Object)" class="member-name-link">setVariable</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varName,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;varValue)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Declare and assign a variable in this container.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setVariable(java.lang.String,java.lang.String,java.lang.Object)" class="member-name-link">setVariable</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varName,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varType,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;varValue)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Declare and assign a variable in this container.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startingExecution()" class="member-name-link">startingExecution</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Subclass hook invoked when starting script execution from within the snippet thread.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#suspend(java.lang.Object)" class="member-name-link">suspend</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;parameter)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Suspend the script that is currently executing in the current thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#variableValue()" class="member-name-link">variableValue</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Obtain the value of a variable being set by <a href="#setVariable(java.lang.String,java.lang.Object)"><code>setVariable()</code></a>.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.dellroad.javabox.Config)">
<h3>JavaBox</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">JavaBox</span><wbr><span class="parameters">(<a href="Config.html" title="class in org.dellroad.javabox">Config</a>&nbsp;config)</span></div>
<div class="block">Constructor.

 <p>
 Instances must be <a href="#initialize()"><code>initialize()</code></a>d before use.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>config</code> - configuration</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>config</code> is null</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getConfig()">
<h3>getConfig</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Config.html" title="class in org.dellroad.javabox">Config</a></span>&nbsp;<span class="element-name">getConfig</span>()</div>
<div class="block">Get the <a href="Config.html" title="class in org.dellroad.javabox"><code>Config</code></a> associated with this instance.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>instance config</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isInitialized()">
<h3>isInitialized</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isInitialized</span>()</div>
<div class="block">Determine if this instance has been initialized.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this instance is initialized, otherwise false</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isClosed()">
<h3>isClosed</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isClosed</span>()</div>
<div class="block">Determine if this instance is closed.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this instance is closed, otherwise false</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isExecuting()">
<h3>isExecuting</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isExecuting</span>()</div>
<div class="block">Determine if this instance is currently executing a script.

 <p>
 A suspended script counts as "currently executing"; use <a href="#isSuspended()"><code>isSuspended()</code></a> to detect that situation.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this instance has a currently executing script, otherwise false</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isSuspended()">
<h3>isSuspended</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSuspended</span>()</div>
<div class="block">Determine if this instance has a suspended script.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if this instance has a currently suspended script, otherwise false</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getJShell()">
<h3>getJShell</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link">JShell</a></span>&nbsp;<span class="element-name">getJShell</span>()</div>
<div class="block">Get the <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link"><code>JShell</code></a> instanced associated with this container.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>this container's <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link"><code>JShell</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance is not yet initialized</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getCurrent()">
<h3>getCurrent</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="JavaBox.html" title="class in org.dellroad.javabox">JavaBox</a></span>&nbsp;<span class="element-name">getCurrent</span>()</div>
<div class="block">Get the <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> instance associated with the current thread.

 <p>
 This method works during (a) <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html" title="class or interface in jdk.jshell" class="external-link"><code>JShell</code></a> initialization and (b) snippet execution.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if there is no such instance</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="initialize()">
<h3>initialize</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initialize</span>()</div>
<div class="block">Initialize this instance.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance is already initialized or closed</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()</div>
<div class="block">Close this instance.

 <p>
 If this instance is already closed this method does nothing.

 <p>
 If there is a currently executing or suspended script, it will be interrupted and allowed to terminate.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/AutoCloseable.html#close()" title="class or interface in java.lang" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/Closeable.html#close()" title="class or interface in java.io" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/Closeable.html" title="class or interface in java.io" class="external-link">Closeable</a></code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getVariable(java.lang.String)">
<h3>getVariable</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">getVariable</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varName)</span>
                   throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Get the value of a variable in this container.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>varName</code> - variable name</dd>
<dt>Returns:</dt>
<dd>variable value</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - if the current thread is interrupted</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance is not initialized or closed</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>varName</code> is not found</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>varName</code> is not a valid Java identifier</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>varName</code> is null</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html#variables()" title="class or interface in jdk.jshell" class="external-link"><code>JShell.variables()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setVariable(java.lang.String,java.lang.Object)">
<h3>setVariable</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setVariable</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varName,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;varValue)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Declare and assign a variable in this container.

 <p>
 Equivalent to: <a href="#setVariable(java.lang.String,java.lang.String,java.lang.Object)"><code>setVariable</code></a><code>(varName, null, varValue)</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>varName</code> - variable name</dd>
<dd><code>varValue</code> - variable value</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - if the current thread is interrupted</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance is not initialized or closed</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>varName</code> is not a valid Java identifier</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>varName</code> is null</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html#variables()" title="class or interface in jdk.jshell" class="external-link"><code>JShell.variables()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setVariable(java.lang.String,java.lang.String,java.lang.Object)">
<h3>setVariable</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setVariable</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varName,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;varType,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;varValue)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">Declare and assign a variable in this container.

 <p>
 This is basically equivalent to executing the script <code>"&lt;varType&gt; &lt;varName&gt; = &lt;varValue&gt;;"</code>.

 <p>
 If <code>vartype</code> is null:
 <ul>
  <li>The actual type of <code>varValue</code> (expressed as a string) will be used;
      this type name must be accessible in the generated script
  <li>If <code>varValue</code> is a non-null primitive wrapper type, the corresponding primitive type is used
  <li>If <code>varValue</code> is null, <code>var</code> will be used
 </ul>

 <p>
 Using the narrowest possible type for <code>varType</code> is advantageous because it eliminates the need
 for casting when referring to <code>varName</code> in subsequent scripts. However, it's possible that
 <code>varType</code> is not accessible in the script environment, e.g., not on the classpath, or a private class.
 In that case, this method will throw a <a href="JavaBoxException.html" title="class in org.dellroad.javabox"><code>JavaBoxException</code></a>. To avoid that, set <code>varType</code> to any
 accessible supertype (e.g., <code>"Object"</code>), or use <code>"var"</code> to infer it.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>varName</code> - variable name</dd>
<dd><code>varType</code> - variable's declared type, or null to infer from actual type; must be accessible in the generated script</dd>
<dd><code>varValue</code> - variable value</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - if the current thread is interrupted</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance is not initialized or closed</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>varName</code> is not a valid Java identifier</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>varName</code> is null</dd>
<dd><code><a href="JavaBoxException.html" title="class in org.dellroad.javabox">JavaBoxException</a></code> - if variable assignment fails</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html#variables()" title="class or interface in jdk.jshell" class="external-link"><code>JShell.variables()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="variableValue()">
<h3>variableValue</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">variableValue</span>()</div>
<div class="block">Obtain the value of a variable being set by <a href="#setVariable(java.lang.String,java.lang.Object)"><code>setVariable()</code></a>.

 <p>
 This method is only used internally; it's <code>public</code> so that it can be accessed
 from JShell scripts.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>value of variable being set if any, otherwise null</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the current thread is not a <a href="#setVariable(java.lang.String,java.lang.Object)"><code>setVariable()</code></a> script thread</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="compile(java.lang.String)">
<h3>compile</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></span>&nbsp;<span class="element-name">compile</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source)</span></div>
<div class="block">Compile the given script but do not execute it.

 <p>
 This is a convenience method, equivalent to:
  <a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)"><code>process</code></a><code>(source, </code><a href="JavaBox.ProcessMode.html#COMPILE"><code>JavaBox.ProcessMode.COMPILE</code></a><code>, null)</code>.
 If compilation is successful, all outcomes will be <a href="SnippetOutcome.SuccessfulNoValue.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.SuccessfulNoValue</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>source</code> - the script to execute</dd>
<dt>Returns:</dt>
<dd>result from script validation</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)"><code>process()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="execute(java.lang.String)">
<h3>execute</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></span>&nbsp;<span class="element-name">execute</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source)</span></div>
<div class="block">Execute the given script in this container.

 <p>
 This is a convenience method, equivalent to:
  <a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)"><code>process</code></a><code>(source, </code><a href="JavaBox.ProcessMode.html#EXECUTE"><code>JavaBox.ProcessMode.EXECUTE</code></a><code>, null)</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>source</code> - the script to execute</dd>
<dt>Returns:</dt>
<dd>result from script execution</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)"><code>process()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="process(java.lang.String,org.dellroad.javabox.JavaBox.ProcessMode,org.dellroad.javabox.SnippetValidator)">
<h3>process</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></span>&nbsp;<span class="element-name">process</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;source,
 <a href="JavaBox.ProcessMode.html" title="enum class in org.dellroad.javabox">JavaBox.ProcessMode</a>&nbsp;mode,
 <a href="SnippetValidator.html" title="interface in org.dellroad.javabox">SnippetValidator</a>&nbsp;validator)</span></div>
<div class="block">Process the given script in this container.

 <p>
 The script is broken into individual snippets, each of which is validated, compiled, and/or executed according to
 the specified <a href="JavaBox.ProcessMode.html" title="enum class in org.dellroad.javabox"><code>JavaBox.ProcessMode</code></a>, and the resulting <a href="SnippetOutcome.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome</code></a>s are returned as a <a href="ScriptResult.html" title="class in org.dellroad.javabox"><code>ScriptResult</code></a>.

 <p><b>Initial Validation</b>

 <p>
 In all <a href="JavaBox.ProcessMode.html" title="enum class in org.dellroad.javabox"><code>JavaBox.ProcessMode</code></a>s, an initial basic structural validation of all snippets is first performed: each
 snippet must be parseable. In addition, if <code>validator</code> is non-null, then it is included in this basic validation
 step for each snpipet. This validation step does not require loading any generated classes or executing any code.
 It is useful, for example, if you want to filter snippets by <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/Snippet.Kind.html" title="class or interface in jdk.jshell" class="external-link"><code>Snippet.Kind</code></a> or otherwise inspect individual snippets.

 <p>
 Snippets that fail to parse will have a <a href="SnippetOutcome.CompilerError.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.CompilerError</code></a> outcome. Otherwise, if <code>validator</code> is non-null,
 each snippet is supplied to it; if it throws a <a href="SnippetValidationException.html" title="class in org.dellroad.javabox"><code>SnippetValidationException</code></a>, that snippet's outcome is set to
 <a href="SnippetOutcome.ValidationFailure.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.ValidationFailure</code></a>. The snippets that <code>validator</code> sees will be <i>unassociated</i> (as described by
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/SourceCodeAnalysis.html#sourceToSnippets(java.lang.String)" title="class or interface in jdk.jshell" class="external-link"><code>SourceCodeAnalysis.sourceToSnippets()</code></a>). Snippets that successfully parse
 and validate will have a <a href="SnippetOutcome.SuccessfulNoValue.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.SuccessfulNoValue</code></a> outcome.

 <p>
 If <code>mode</code> is <a href="JavaBox.ProcessMode.html#VALIDATE"><code>JavaBox.ProcessMode.VALIDATE</code></a> then processing stops after all snippets are validated and their
 outcomes are returned. This mode can be used to gather basic information about a script, including how many snippets
 it contains, their source code offsets, their <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/Snippet.Kind.html" title="class or interface in jdk.jshell" class="external-link"><code>Snippet.Kind</code></a>, etc.

 <p><b>Compilation</b>

 <p>
 If <code>mode</code> is <a href="JavaBox.ProcessMode.html#COMPILE"><code>JavaBox.ProcessMode.COMPILE</code></a>, then after initial validation each snippet is fully compiled into
 bytecode and loaded (so that any configured <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a>s are given a chance to veto it), but no execution of
 any snippet's generated bytecode occurs.

 <p><b>Execution</b>

 <p>
 If <code>mode</code> is <a href="JavaBox.ProcessMode.html#EXECUTE"><code>JavaBox.ProcessMode.EXECUTE</code></a>, then after initial validation each snippet is compiled, loaded,
 and executed, one at a time. Processing stops if compilation or execution of any snippet results in an error,
 i.e., it has an outcome implementing <a href="SnippetOutcome.HaltsScript.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.HaltsScript</code></a>. If this happens, subsequent snippets will have outcome
 <a href="SnippetOutcome.Skipped.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Skipped</code></a>.

 <p><b>Suspend/Resume</b>

 <p>
 If an executing script suspends itself by invoking <a href="#suspend(java.lang.Object)"><code>suspend()</code></a>, this method immediately returns,
 the corresponding snippet outcome is <a href="SnippetOutcome.Suspended.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Suspended</code></a>, and the script then becomes this instance's <i>suspended script</i>.
 The script must be <a href="#resume(java.lang.Object)"><code>resume()</code></a>ed before a new script can be processed. A suspended script can also be
 <a href="#interrupt()"><code>interrupt()</code></a>ed, in which case it will throw <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a> as soon as it is resumed.

 <p>
 When this method returns early due to suspension, subsequent snippets will have outcome <a href="SnippetOutcome.Skipped.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Skipped</code></a>. If the script
 is later <a href="#resume(java.lang.Object)"><code>resume()</code></a>ed, these outcomes are updated accordingly in the return value from that method.

 <p>
 If this method is invoked when this instance already has a suspended script, an <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> is thrown.

 <p><b>Interruption</b>

 <p>
 This method blocks until the script completes, suspends itself, or <a href="#interrupt()"><code>interrupt()</code></a> is invoked (typically from
 another thraed). Interrupting the current thread has the same effect as invoking <a href="#interrupt()"><code>interrupt()</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>source</code> - the script to process</dd>
<dd><code>mode</code> - processing mode</dd>
<dd><code>validator</code> - if not null, invoked to perform initial validation of each snippet in <code>source</code></dd>
<dt>Returns:</dt>
<dd>result from script processing</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code> - if the current thread is interrupted or <a href="#interrupt()"><code>interrupt()</code></a> is invoked</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance has a suspended script</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance is not initialized or closed</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if <code>source</code> or <code>mode</code> is null</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="suspend(java.lang.Object)">
<h3>suspend</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">suspend</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;parameter)</span></div>
<div class="block">Suspend the script that is currently executing in the current thread.

 <p>
 If a script invokes this method, the script will pause and the associated <a href="#execute(java.lang.String)"><code>execute()</code></a>
 or <a href="#resume(java.lang.Object)"><code>resume()</code></a> invocation that (re)started this script's execution will return to the caller,
 and the corresponding snippet outcome will be a <a href="SnippetOutcome.Suspended.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Suspended</code></a> containing the given <code>parameter</code>.

 <p>
 This instance will then have a <i>suspended script</i>; it must be <a href="#resume(java.lang.Object)"><code>resume()</code></a>ed before a
 new script can be <a href="#execute(java.lang.String)"><code>execute()</code></a>ed. A suspended script can be <a href="#interrupt()"><code>interrupt()</code></a>ed, in which
 case it will throw <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a> as soon as it resumes.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>parameter</code> - value to be made available via <a href="SnippetOutcome.Suspended.html#parameter()"><code>SnippetOutcome.Suspended.parameter()</code></a></dd>
<dt>Returns:</dt>
<dd>the return value provided to <a href="#resume(java.lang.Object)"><code>resume()</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link">ThreadDeath</a></code> - if <a href="#interrupt()"><code>interrupt()</code></a> or <a href="#close()"><code>close()</code></a> was invoked while suspended</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the current thread is not a script execution thread</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="resume(java.lang.Object)">
<h3>resume</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ScriptResult.html" title="class in org.dellroad.javabox">ScriptResult</a></span>&nbsp;<span class="element-name">resume</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;returnValue)</span></div>
<div class="block">Resume this instance's suspended script.

 <p>
 The script's earlier invocation of <a href="#suspend(java.lang.Object)"><code>suspend()</code></a> will return the given <code>returnValue</code>,
 or throw <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a> if <a href="#interrupt()"><code>interrupt()</code></a> has been invoked since it was suspended. This method will
 then block just like <a href="#execute(java.lang.String)"><code>execute()</code></a>, i.e., until the script terminates or suspends itself again.

 <p>
 The returned <a href="ScriptResult.html" title="class in org.dellroad.javabox"><code>ScriptResult</code></a> will include the outcomes from all snippets in the original script,
 including those that executed before the snippet that invoked <a href="#suspend(java.lang.Object)"><code>suspend()</code></a>, followed by
 the updated outcome of the suspended snippet (replacing the previous <a href="SnippetOutcome.Suspended.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Suspended</code></a> outcome), followed
 by the outcomes of the script's subsequent snippets.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>returnValue</code> - the value to be returned to the script from <a href="#suspend(java.lang.Object)"><code>suspend()</code></a></dd>
<dt>Returns:</dt>
<dd>the result from the script's execution</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link">ThreadDeath</a></code> - if <a href="#interrupt()"><code>interrupt()</code></a> or <a href="#close()"><code>close()</code></a> was invoked on the associated container</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance has no currently suspended script</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if this instance is not initialized or closed</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="interrupt()">
<h3>interrupt</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">interrupt</span>()</div>
<div class="block">Interrupt the current script execution, if any.

 <p>
 If there is no current execution, then nothing happens and false is returned. Otherwise, an attempt is made to stop
 the execution via <a href="https://docs.oracle.com/en/java/javase/24/docs/api/jdk.jshell/jdk/jshell/JShell.html#stop()" title="class or interface in jdk.jshell" class="external-link"><code>JShell.stop()</code></a>. If successful, the final snippet outcome will be <a href="SnippetOutcome.Interrupted.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Interrupted</code></a>.
 Even in this case, because this operation is asynchronous, the snippet may have actually never started, it may have only
 partially completed, or it may have fully completed.

 <p>
 If this instance has a currently suspeneded script, that script will awaken and throw an immediate <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a>
 exception. Note that <a href="SnippetOutcome.Interrupted.html" title="interface in org.dellroad.javabox"><code>SnippetOutcome.Interrupted</code></a> is the outcome assigned to any snippet that terminates by
 throwing <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a>.

 <p>
 If this instance is closed or not initialized, false is returned.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if execution was interrupted, false if no execution was occurring</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="executionContextFor(java.lang.Class)">
<h3>executionContextFor</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="Control.ExecutionContext.html" title="class in org.dellroad.javabox">Control.ExecutionContext</a></span>&nbsp;<span class="element-name">executionContextFor</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="Control.html" title="interface in org.dellroad.javabox">Control</a>&gt;&nbsp;controlType)</span></div>
<div class="block">Obtain the execution context associated with the specified <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a> class
 and the script execution occurring in the current thread.

 <p>
 This method can be used by <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a>s that need access to the per-execution or per-container
 context from within the execution thread, for example, from bytecode woven into script classes.

 <p>
 The <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a> class is used instead of the <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a> instance itself to allow invoking
 this method from woven bytecode. The <code>controlType</code> must exactly equal the <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a>
 instance class (not just be assignable from it). If multiple instances of the same <a href="Control.html" title="interface in org.dellroad.javabox"><code>Control</code></a>
 class are configured on a container, then the context associated with the first instance is returned.

 <p>
 This method only works while executing within the container. For example, if a scripts defines and returns
 an instance of some class <code>C</code>, and then the caller invokes a method <code>C.foo()</code> which in turn
 invokes this method, this method will throw an <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> because it will be executing
 outside of the container. In other words, controls that use this method must make other arrangements if
 they want to obtain context when executing script code outside of the container.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>controlType</code> - the control's Java class</dd>
<dt>Returns:</dt>
<dd>the execution context for the control of type <code>controlType</code></dd>
<dt>Throws:</dt>
<dd><code><a href="JavaBoxException.html" title="class in org.dellroad.javabox">JavaBoxException</a></code> - if no control having type <code>controlType</code> is configured</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the current thread is not a <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> script execution thread</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="startingExecution()">
<h3>startingExecution</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startingExecution</span>()</div>
<div class="block">Subclass hook invoked when starting script execution from within the snippet thread.

 <p>
 This method must not lock this instance or deadlock will result.

 <p>
 The implementation in <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> does nothing.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="finishingExecution(java.lang.Object,java.lang.Throwable)">
<h3>finishingExecution</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">finishingExecution</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;result,
 <a href="https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a>&nbsp;error)</span></div>
<div class="block">Subclass hook invoked when finishing script execution from within the snippet thread.

 <p>
 This method must not lock this instance or deadlock will result.

 <p>
 The implementation in <a href="JavaBox.html" title="class in org.dellroad.javabox"><code>JavaBox</code></a> does nothing.</div>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
